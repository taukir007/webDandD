<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Web Design and Developemet — Daily Work</title>
<link rel="icon" href="data:," />
<style>
  :root{
    --bg-light: linear-gradient(180deg,#f6f8ff,#eef6ff);
    --bg-dark: linear-gradient(180deg,#0f1724,#081022);
    --panel-light: rgba(255,255,255,0.78);
    --panel-dark: rgba(255,255,255,0.03);
    --glass-border-light: rgba(15,23,36,0.04);
    --glass-border-dark: rgba(255,255,255,0.04);
    --text-light: #0f1724;
    --text-dark: #eaf0ff;
    --muted-light: #55606a;
    --muted-dark: #9aa4b2;
    --accent-1: #7c5cff;
    --accent-2: #5aa1ff;
    --card-radius: 14px;
    --card-padding: 16px;
    --shadow-light: 0 12px 40px rgba(15,23,36,0.08);
    --shadow-dark: 0 18px 50px rgba(2,6,23,0.6);
    --transition: 360ms cubic-bezier(.2,.9,.3,1);
    --switch-bg-light: linear-gradient(90deg,#e9efff,#eef6ff);
    --switch-knob-light: #263243;
    --switch-bg-dark: linear-gradient(90deg,var(--accent-1),var(--accent-2));
    --switch-knob-dark: #ffffff;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  /* base */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;min-height:100%;display:flex;flex-direction:column;transition:background var(--transition), color var(--transition);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}

  /* light theme (default) */
  body.light{ background:var(--bg-light); color:var(--text-light); }
  body.light .panel{ background:var(--panel-light); border:1px solid var(--glass-border-light); box-shadow:var(--shadow-light); }
  body.light .muted{ color:var(--muted-light); }
  body.light .pill{ background: rgba(255,255,255,0.92); color:var(--text-light); }
  body.light .switch{ background: var(--switch-bg-light); }
  body.light .switch .knob{ background: var(--switch-knob-light); }

  /* dark theme */
  body.dark{ background:var(--bg-dark); color:var(--text-dark); }
  body.dark .panel{ background:var(--panel-dark); border:1px solid var(--glass-border-dark); box-shadow:var(--shadow-dark); }
  body.dark .muted{ color:var(--muted-dark); }
  body.dark .pill{ background: rgba(255,255,255,0.06); color:var(--text-dark); }
  body.dark .switch{ background: var(--switch-bg-dark); }
  body.dark .switch .knob{ background: var(--switch-knob-dark); }

  /* ambient */
  .ambient{ position:fixed; inset:0; z-index:0; pointer-events:none; opacity:0.9; background: radial-gradient(700px 300px at 8% 12%, rgba(124,92,255,0.12), transparent 10%), radial-gradient(600px 260px at 92% 92%, rgba(90,161,255,0.07), transparent 10%); mix-blend-mode:screen; transition:opacity var(--transition); }

  /* header */
  header{ position:relative; z-index:2; padding:28px 18px 6px; display:flex; flex-direction:column; align-items:center; gap:10px; text-align:center; }
  .brand{ display:flex; align-items:center; gap:14px; padding:10px; border-radius:999px; backdrop-filter:blur(6px); transition:background var(--transition); }
  .logo-static{ width:64px; height:64px; border-radius:14px; display:flex; align-items:center; justify-content:center; background-image: linear-gradient(135deg,var(--accent-1),var(--accent-2)); color:white; font-weight:800; font-size:20px; letter-spacing:0.6px; box-shadow:0 10px 30px rgba(11,18,40,0.12); }
  h1{ margin:0; font-size:1.5rem; }
  p.lead{ margin:6px 0 0; font-size:0.95rem; max-width:880px; }

  /* controls */
  .controls{ margin:16px auto 0; display:flex; gap:12px; align-items:center; width:100%; max-width:1100px; padding:0 12px; z-index:2; }
  .search{ flex:1; padding:12px 14px; border-radius:12px; border:1px solid rgba(0,0,0,0.06); background:transparent; outline:none; font-size:1rem; transition:box-shadow var(--transition); }
  .search:focus{ box-shadow:0 6px 18px rgba(11,18,40,0.06); }
  .control-group{ display:flex; gap:8px; align-items:center; }

  .btn{ padding:10px 14px; border-radius:12px; border:0; cursor:pointer; background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:white; font-weight:700; box-shadow:0 10px 28px rgba(11,18,40,0.12); }

  /* toggle */
  .toggle{ display:inline-flex; align-items:center; gap:8px; padding:6px 8px; border-radius:999px; }
  .switch{ width:48px; height:28px; border-radius:999px; display:flex; align-items:center; padding:3px; cursor:pointer; transition: background var(--transition), box-shadow var(--transition); box-shadow: inset 0 1px 0 rgba(255,255,255,0.04); }
  .knob{ width:22px; height:22px; border-radius:50%; transition: transform var(--transition), background var(--transition), box-shadow var(--transition); box-shadow: 0 4px 10px rgba(2,6,23,0.18); transform: translateX(0); }
  .switch.on .knob{ transform: translateX(20px); }
  /* in dark mode, add stronger glow to switch */
  body.dark .switch{ box-shadow: 0 6px 18px rgba(11,18,40,0.32); }

  /* layout */
  main{ flex:1; display:flex; justify-content:center; padding:18px 12px 24px; position:relative; z-index:2; }
  .wrap{ width:100%; max-width:1100px; }
  .grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr)); gap:18px; margin-top:18px; }

  /* cards */
  .card{ position:relative; overflow:hidden; border-radius:var(--card-radius); padding:var(--card-padding); min-height:140px; display:flex; flex-direction:column; gap:10px; backdrop-filter: blur(10px); transition: transform var(--transition), box-shadow var(--transition); }
  body.light .card{ background: rgba(255,255,255,0.92); border:1px solid var(--glass-border-light); box-shadow:var(--shadow-light); }
  body.dark .card{ background: rgba(255,255,255,0.03); border:1px solid var(--glass-border-dark); box-shadow:var(--shadow-dark); }
  .card:hover{ transform: translateY(-10px) scale(1.01); box-shadow: 0 36px 80px rgba(2,6,23,0.6); }

  .daytitle{ font-weight:800; font-size:1.02rem; }
  .desc{ color:var(--muted-light); }
  body.dark .desc{ color:var(--muted-dark); }
  .meta{ margin-top:auto; display:flex; align-items:center; gap:10px; }
  .pill{ padding:6px 10px; border-radius:999px; font-weight:700; font-size:0.82rem; }
  .actions{ margin-left:auto; display:flex; gap:8px; }
  .small{ padding:8px 10px; border-radius:10px; border:none; background:transparent; color:inherit; font-weight:700; cursor:pointer; }
  .primary{ padding:8px 10px; border-radius:10px; border:none; background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:white; font-weight:700; cursor:pointer; }

  .empty{ color:var(--muted-light); padding:22px; border-radius:12px; text-align:center; }
  body.dark .empty{ color:var(--muted-dark); }

  /* modal */
  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:90; }
  .modal.open{ display:flex; background:linear-gradient(rgba(2,6,23,0.6), rgba(2,6,23,0.85)); }
  .modal-box{ width:100%; max-width:1120px; height:84vh; border-radius:12px; overflow:hidden; display:flex; flex-direction:column; background:linear-gradient(180deg,#fff,#fbfbff); }
  .modal-header{ display:flex; align-items:center; gap:12px; padding:12px 14px; border-bottom:1px solid #eef2f8; font-weight:800; }
  .modal-title{ color:#0b1228; }
  .modal-close{ margin-left:auto; background:none; border:0; font-size:1.1rem; cursor:pointer; color:#6b7280; }
  iframe{ flex:1; border:0; background:white!important; }

  footer{ padding:14px 18px; text-align:center; color:var(--muted-light); font-size:0.95rem; border-top:1px solid rgba(255,255,255,0.02); margin-top:auto; z-index:2; }
  body.dark footer{ color:var(--muted-dark); }
  footer a{ color:var(--accent-2); font-weight:700; text-decoration:none; }

  .panel{ border-radius:999px; padding:6px; display:inline-flex; align-items:center; gap:10px; transition: background var(--transition), border var(--transition), box-shadow var(--transition); }

  @media (max-width:820px){
    .controls{ flex-direction:column; align-items:stretch; }
    .brand{ flex-direction:column; }
    .card{ min-height:130px; }
  }
</style>
</head>
<body>
  <div class="ambient" aria-hidden="true"></div>

  <header role="banner">
    <div class="brand panel" id="brandPanel" role="img" aria-label="Web Design and Developemet">
      <div class="logo-static" id="logoStatic">WD</div>
      <div>
        <h1>Web Design and Developemet</h1>
        <p class="lead muted">Modern animated glassmorphism gallery of daily HTML/CSS/JS practice. Add <code>meta.json</code> to folders to show descriptions.</p>
      </div>
    </div>

    <div class="controls" role="region" aria-label="Search and controls">
      <input id="q" class="search panel" placeholder="Search (Day 1, CSS, header)..." aria-label="Search days" />
      <div class="control-group">
        <div class="toggle panel" title="Toggle theme">
          <div id="themeSwitch" class="switch" role="switch" tabindex="0" aria-checked="false" aria-label="Toggle dark / light">
            <div class="knob"></div>
          </div>
        </div>
        <button id="refresh" class="btn" title="Refresh listing">Refresh</button>
      </div>
    </div>
  </header>

  <main role="main">
    <div class="wrap">
      <div id="grid" class="grid" aria-live="polite"></div>
      <div id="empty" class="empty" style="display:none"></div>
    </div>
  </main>

  <footer role="contentinfo">
    Built &amp; Designed by <a href="https://github.com/taukir007" target="_blank" rel="noopener noreferrer">Taukir</a> • Powered by GitHub Pages
  </footer>

  <!-- modal preview -->
  <div id="modal" class="modal" aria-hidden="true" role="dialog" aria-label="Preview dialog">
    <div class="modal-box" role="document">
      <div class="modal-header">
        <div id="modalTitle" class="modal-title">Preview</div>
        <button id="closeBtn" class="modal-close" aria-label="Close preview">✕</button>
      </div>
      <iframe id="previewFrame" sandbox="allow-scripts allow-forms allow-same-origin" title="Day preview"></iframe>
    </div>
  </div>

<script>
/* ====== CONFIG ====== */
const OWNER = 'taukir007';
const REPO  = 'webDandD';
const DATA_PATH = 'data/folders.json';
const BRANCH = 'main';

/* ====== ELEMENTS ====== */
const bodyEl = document.body;
const brandPanel = document.getElementById('brandPanel');
const grid = document.getElementById('grid');
const empty = document.getElementById('empty');
const q = document.getElementById('q');
const refresh = document.getElementById('refresh');
const modal = document.getElementById('modal');
const previewFrame = document.getElementById('previewFrame');
const modalTitle = document.getElementById('modalTitle');
const closeBtn = document.getElementById('closeBtn');
const themeSwitch = document.getElementById('themeSwitch');

/* ====== THEME ====== */
const THEME_KEY = 'webdandd_theme';
function setTheme(theme){
  if(theme === 'dark'){ bodyEl.classList.add('dark'); bodyEl.classList.remove('light'); themeSwitch.classList.add('on'); themeSwitch.setAttribute('aria-checked','true'); }
  else { bodyEl.classList.remove('dark'); bodyEl.classList.add('light'); themeSwitch.classList.remove('on'); themeSwitch.setAttribute('aria-checked','false'); }
  try { localStorage.setItem(THEME_KEY, theme); } catch(e){}
  // update brandPanel background for visible contrast
  if(bodyEl.classList.contains('dark')) brandPanel.style.background = 'var(--panel-dark)';
  else brandPanel.style.background = 'var(--panel-light)';
}
function toggleTheme(){
  const cur = localStorage.getItem(THEME_KEY) || (bodyEl.classList.contains('dark') ? 'dark' : 'light');
  setTheme(cur === 'dark' ? 'light' : 'dark');
}
// initialize theme
(function initTheme(){
  let t = null;
  try { t = localStorage.getItem(THEME_KEY); } catch(e){}
  if(!t) t = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light';
  setTheme(t);
})();
// events
themeSwitch.addEventListener('click', toggleTheme);
themeSwitch.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleTheme(); } });

/* ====== DATA LOADING & RENDER ====== */
async function loadData(){
  try {
    const res = await fetch(DATA_PATH, { cache: 'no-store' });
    if(!res.ok) throw new Error('not-found');
    const j = await res.json();
    if(!Array.isArray(j)) throw new Error('invalid-json');
    return j;
  } catch (e) {
    console.warn('Failed to load data/folders.json', e);
    return null;
  }
}

function encodePath(p){ return p.split('/').map(s => encodeURIComponent(s)).join('/'); }

function makeCard(item){
  const card = document.createElement('div');
  card.className = 'card';
  card.tabIndex = 0;

  const title = document.createElement('div'); title.className = 'daytitle'; title.textContent = item.name;
  card.appendChild(title);

  const desc = document.createElement('div'); desc.className = 'desc muted'; desc.textContent = item.description ? item.description : (item.index ? 'Preview available' : 'No index.html');
  card.appendChild(desc);

  const meta = document.createElement('div'); meta.className = 'meta';
  const pill = document.createElement('div'); pill.className = 'pill'; pill.textContent = item.index ? 'HTML' : 'Folder';
  meta.appendChild(pill);

  const actions = document.createElement('div'); actions.className = 'actions';
  if(item.index){
    const pbtn = document.createElement('button'); pbtn.className = 'primary'; pbtn.textContent = 'Preview';
    pbtn.addEventListener('click', ()=> openPreview(item.name, `https://${OWNER}.github.io/${REPO}/${encodePath(item.path)}/`));
    actions.appendChild(pbtn);
  } else {
    const of = document.createElement('button'); of.className = 'small'; of.textContent = 'Open';
    of.addEventListener('click', ()=> window.open(`https://github.com/${OWNER}/${REPO}/tree/${BRANCH}/${encodePath(item.path)}`,'_blank'));
    actions.appendChild(of);
  }
  const src = document.createElement('button'); src.className = 'small'; src.textContent = 'Source';
  src.addEventListener('click', ()=> window.open(`https://github.com/${OWNER}/${REPO}/tree/${BRANCH}/${encodePath(item.path)}`,'_blank'));
  actions.appendChild(src);

  meta.appendChild(actions);
  card.appendChild(meta);

  card.addEventListener('keydown', (e)=> {
    if(e.key === 'Enter'){
      if(item.index) openPreview(item.name, `https://${OWNER}.github.io/${REPO}/${encodePath(item.path)}/`);
      else window.open(`https://github.com/${OWNER}/${REPO}/tree/${BRANCH}/${encodePath(item.path)}`,'_blank');
    }
  });

  return card;
}

function render(list){
  grid.innerHTML = '';
  if(!list || list.length === 0){
    empty.style.display = 'block'; empty.textContent = 'No Day folders found. Ensure data/folders.json is created by the workflow.';
    return;
  }
  empty.style.display = 'none';
  for(const item of list) grid.appendChild(makeCard(item));
  applyFilter();
}

function applyFilter(){
  const qv = (q.value || '').toLowerCase().trim();
  const cards = Array.from(grid.children);
  let shown = 0;
  for(const c of cards){
    const t = (c.querySelector('.daytitle')?.textContent || '').toLowerCase();
    const d = (c.querySelector('.desc')?.textContent || '').toLowerCase();
    if(qv === '' || t.includes(qv) || d.includes(qv)){ c.style.display = ''; shown++; } else c.style.display = 'none';
  }
  if(shown === 0){ empty.style.display = 'block'; empty.textContent = 'No results.'; } else empty.style.display = 'none';
}

async function refreshList(){
  const data = await loadData();
  if(!data){
    grid.innerHTML = ''; empty.style.display = 'block'; empty.textContent = 'data/folders.json missing or invalid. Check Actions tab.';
    return;
  }
  data.sort((a,b)=>{ const na = parseInt((a.name.match(/\d+/)||[])[0]||0); const nb = parseInt((b.name.match(/\d+/)||[])[0]||0); if(na && nb) return na-nb; return a.name.localeCompare(b.name); });
  render(data);
}

/* modal */
function openPreview(title, url){
  modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); modalTitle.textContent = title + ' — Live Preview'; previewFrame.src = url; closeBtn.focus();
}
function closePreview(){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); previewFrame.src = 'about:blank'; refresh.focus(); }

/* events */
q.addEventListener('input', applyFilter);
refresh.addEventListener('click', refreshList);
closeBtn.addEventListener('click', closePreview);
modal.addEventListener('click', (e)=> { if(e.target === modal) closePreview(); });
document.addEventListener('keydown', (e)=> { if(e.key === 'Escape') closePreview(); });

/* init */
refreshList();
</script>
</body>
</html>
